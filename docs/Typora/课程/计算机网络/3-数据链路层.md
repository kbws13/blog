# 基本概念

结点：主机、路由器

链路：网络中两个结点之间的**物理通道**，链路的传输介质主要有双绞线、光纤和微波，分为有线链路和无线链路

数据链路：网络中两个结点之间的**逻辑通道**，把实现控制数据传输**协议**的硬件和软件加到链路上就构成数据链路

帧：链路层的协议数据单元，封装网络层数据报

> 数据链路层负责通过一条链路从一个结点向另一个物理链路直接相连的相邻结点传送数据报



# 功能

数据链路层在物理层提供服务的基础上向**网络层提供服务**，其最基本的服务是将源自网络层来的数据==可靠==的传输到相邻结点的目标机网络层。其主要作业是**加强物理层传输原始比特流的功能**，将物理层提供的可能出错的物理连接改造成==逻辑上无差错的数据链路==，使之对网络层表现为一条无差错的链路

1. 为网络层提供服务。无确认无连接服务，有确认无连接服务，有确认面向连接服务。有连接一定有确认
2. 链路管理，即连接的建立、维持、释放（用于面向连接的服务）
3. 组帧
4. 差错控制（帧错/位错）

## 封装成帧和透明传输

封装成帧就是在一段数据的前后添加首部和尾部，这样就构成了一个帧。接收端在物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中识别帧的开始和结束

首部和尾部包含许多控制信息，他们的一个重要作用：==帧定界==（确定帧的界限）

==帧同步==：**接收方**应当能从接收到的二进制比特流中区分出帧的起始和终止

组帧的四种方法：

1. 字符计数法
2. 字符（节）填充法
3. 零比特填充法
4. 违规编码法

![image-20230817102719762](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230817102719762.png)



**透明传输**是指不管所传数据是什么样的比特组合，都应当能够在链路上传送。因此，链路层就“看不见”有什么妨碍数据传输的东西

当所传数据中的比特组合恰巧与某一个控制信息完全一样时，就必须采取适当的措施，使收方不会将这样的数据误认为是某种控制信息。这样才能保证数据链路层的传输是透明的



### 透明传输在组帧上面的应用

1. 字符计数法

   帧首部使用一个计数字段（第一个字节，八位）来表明帧内字符数

   ![image-20230821171108326](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230821171108326.png)

2. 字符填充法

   ![image-20230821182343562](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230821182343562.png)

   1. 当传送的帧是由文本文件组成的时候（文本文件的字符都是从键盘上输入的，都是ASCII码）不管从键盘上输入什么字符都可以放在帧里传过去，即==透明传输==
   2. 当传送的帧是由非ASCII码的文本文件组成时（二进制的程序或者图像），就要==采用字符填充方法实现透明传输==

   ![image-20230821201114818](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230821201114818.png)

3. 零比特填充法

   ![image-20230821202315926](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230821202315926.png)

4. 违规编码法

   ![image-20230821202335492](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230821202335492.png)

   

## 差错控制

### 差错从哪里来

传输中的差错都是由于噪声引起的

全局性：由于线路本身的电器特性所产生的**随机噪声**（热噪声），是信道固有的，随机存在的。

​					解决方法：提高信噪比来减少或避免干扰（对传感器下手）

局限性：外界特定的短暂原因造成的冲击噪声，是产生差错的主要原因

​					解决方法：通常使用编码技术来解决

![image-20230822083431655](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230822083431655.png)



### 位错

![image-20230822085102686](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230822085102686.png)

![image-20230822085113410](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230822085113410.png)



#### 检错编码

奇偶校验码

![image-20230822085224617](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230822085224617.png)

![image-20230822085456493](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230822085456493.png)



CRC循环冗余码

![image-20230822090956190](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230822090956190.png)

![image-20230822094425770](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230822094425770.png)

![image-20230822094445668](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230822094445668.png)

![image-20230822094456693](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230822094456693.png)

海明码

![image-20230914161234049](3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.assets/image-20230914161234049.png)







##### 重传帧





#### 纠错编码





### 帧错



#### 定时器、编号机制





## 流量控制







## 可靠传输







# 应用



## 两种链路/信道





### 点对点（广域网）





### 广播（局域网）





介质访问



静态划分信道





动态划分信道







## 链路层设备